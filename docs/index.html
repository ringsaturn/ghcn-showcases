<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GHCNd Showcases</title>

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      crossorigin=""
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/comparison.css" />

    <!-- External Libraries -->
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      crossorigin=""
    ></script>
    <script
      src="https://unpkg.com/protomaps-leaflet@5.0.1/dist/protomaps-leaflet.js"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"
    ></script>
    <script
      src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"
    ></script>
  </head>
  <body>
    <div id="map"></div>

    <!-- Language Switch -->
    <div class="lang-switch" onclick="toggleLanguage()">
      <span id="langText">EN</span>
    </div>

    <!-- Data Type Switch -->
    <div class="data-type-switch" onclick="toggleDataType()">
      <span id="dataTypeText">极值</span>
    </div>

    <!-- Data source note -->
    <div id="dataSourceNote">
      <!-- Filled by JS -->
    </div>

    <!-- Compare Button -->
    <button id="toggleComparePanel" title="Toggle Comparison Panel">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <polyline points="22 12 18 8 14 12"></polyline>
        <path d="M18 8v8"></path>
        <polyline points="10 12 6 16 2 12"></polyline>
        <path d="M6 16V8"></path>
      </svg>
    </button>

    <!-- Compare Panel -->
    <div id="comparePanel">
      <h3>
        <span id="comparePanelTitle">Station Comparison</span>
        <button
          id="closeComparePanel"
          style="background: none; border: none; cursor: pointer; font-size: 18px"
        >
          ×
        </button>
      </h3>
      <div id="compareLimit"></div>
      <div class="compare-station-list" id="compareStationList">
        <div class="no-stations-message" id="noStationsMessage">
          No stations selected
        </div>
      </div>
      <div class="compare-buttons">
        <button class="compare-view-btn" id="viewComparisonBtn">
          View Comparison
        </button>
        <button class="compare-clear-btn" id="clearComparisonBtn">
          Clear All
        </button>
      </div>
    </div>

    <!-- Comparison Modal -->
    <div id="comparisonModal" class="compare-modal">
      <div class="compare-modal-content">
        <div class="compare-modal-header">
          <h3 id="compareModalTitle">Station Comparison</h3>
          <button class="compare-close-btn" id="closeComparisonModal">×</button>
        </div>
        <div class="compare-tabs">
          <button
            class="compare-tab active"
            id="temperatureTab"
            data-tab="temperature"
          >
            Temperature
          </button>
          <button
            class="compare-tab"
            id="precipitationTab"
            data-tab="precipitation"
          >
            Precipitation
          </button>
        </div>
        <div class="compare-chart-container">
          <canvas id="compareChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Application Scripts -->
    <script src="js/config.js"></script>
    <script src="js/language.js"></script>
    <script src="js/map.js"></script>
    <script src="js/chart.js"></script>
    <script src="js/popup.js"></script>
    <script src="js/comparison.js"></script>
    <script src="js/station.js"></script>
  </body>
</html>
